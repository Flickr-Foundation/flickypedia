interactions:
- request:
    body: ''
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      host:
      - commons.wikimedia.org
      user-agent:
      - python-httpx/0.24.1
    method: GET
    uri: https://commons.wikimedia.org/w/api.php?action=query&meta=tokens&type=csrf&format=json
  response:
    content: '{"batchcomplete":"","query":{"tokens":{"csrftoken":"365620516acc87a553d5c5e1d87f770165253c11+\\"}}}'
    headers:
      accept-ranges:
      - bytes
      age:
      - '0'
      cache-control:
      - private, must-revalidate, max-age=0
      content-disposition:
      - inline; filename=api-result.json
      content-length:
      - '99'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 10 Oct 2023 11:57:05 GMT
      nel:
      - '{ "report_to": "wm_nel", "max_age": 604800, "failure_fraction": 0.05, "success_fraction":
        0.0}'
      report-to:
      - '{ "group": "wm_nel", "max_age": 604800, "endpoints": [{ "url": "https://intake-logging.wikimedia.org/v1/events?stream=w3c.reportingapi.network_error&schema_uri=/w3c/reportingapi/network_error/1.0.0"
        }] }'
      server:
      - mw1380.eqiad.wmnet
      server-timing:
      - cache;desc="pass", host;desc="cp3068"
      set-cookie:
      - WMF-Last-Access=10-Oct-2023;Path=/;HttpOnly;secure;Expires=Sat, 11 Nov 2023
        00:00:00 GMT
      - GeoIP=GB:ENG:Norwich:52.63:1.30:v4; Path=/; secure; Domain=.wikimedia.org
      - NetworkProbeLimit=0.001;Path=/;Secure;Max-Age=3600
      strict-transport-security:
      - max-age=106384710; includeSubDomains; preload
      vary:
      - Accept-Encoding
      x-cache:
      - cp3068 pass, cp3068 pass
      x-cache-status:
      - pass
      x-client-ip:
      - 80.42.123.5
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    http_version: HTTP/1.1
    status_code: 200
- request:
    body: action=upload&filename=example.jpg&url=https%3A%2F%2Falexwlchan.net%2Fimages%2Fexample.jpg&token=365620516acc87a553d5c5e1d87f770165253c11%2B%5C&text=%3D%3D%7B%7Bint%3Alicense-header%7D%7D%3D%3D%0A%7B%7Bself%7Ccc-by-2.0%7D%7D&format=json
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '236'
      content-type:
      - application/x-www-form-urlencoded
      cookie:
      - GeoIP=GB:ENG:Norwich:52.63:1.30:v4; NetworkProbeLimit=0.001; WMF-Last-Access=10-Oct-2023
      host:
      - commons.wikimedia.org
      user-agent:
      - python-httpx/0.24.1
    method: POST
    uri: https://commons.wikimedia.org/w/api.php
  response:
    content: '{"error":{"code":"copyuploadbaddomain","info":"Uploads by URL are not
      allowed from this domain.","*":"See https://commons.wikimedia.org/w/api.php
      for API usage. Subscribe to the mediawiki-api-announce mailing list at &lt;https://lists.wikimedia.org/postorius/lists/mediawiki-api-announce.lists.wikimedia.org/&gt;
      for notice of API deprecations and breaking changes."},"servedby":"mw2376"}'
    headers:
      accept-ranges:
      - bytes
      age:
      - '0'
      cache-control:
      - private, must-revalidate, max-age=0
      content-disposition:
      - inline; filename=api-result.json
      content-length:
      - '388'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 10 Oct 2023 11:57:05 GMT
      mediawiki-api-error:
      - copyuploadbaddomain
      nel:
      - '{ "report_to": "wm_nel", "max_age": 604800, "failure_fraction": 0.05, "success_fraction":
        0.0}'
      report-to:
      - '{ "group": "wm_nel", "max_age": 604800, "endpoints": [{ "url": "https://intake-logging.wikimedia.org/v1/events?stream=w3c.reportingapi.network_error&schema_uri=/w3c/reportingapi/network_error/1.0.0"
        }] }'
      server:
      - mw2376.codfw.wmnet
      server-timing:
      - cache;desc="pass", host;desc="cp3068"
      set-cookie:
      - NetworkProbeLimit=0.001;Path=/;Secure;Max-Age=3600
      strict-transport-security:
      - max-age=106384710; includeSubDomains; preload
      vary:
      - Accept-Encoding
      x-cache:
      - cp3068 pass, cp3068 pass
      x-cache-status:
      - pass
      x-client-ip:
      - 80.42.123.5
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    http_version: HTTP/1.1
    status_code: 200
version: 1
