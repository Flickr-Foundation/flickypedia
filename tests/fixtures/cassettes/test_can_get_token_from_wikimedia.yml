interactions:
- request:
    body: grant_type=authorization_code&code=[AUTHORIZATION_CODE...def5]
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '980'
      content-type:
      - application/x-www-form-urlencoded;charset=UTF-8
      host:
      - meta.wikimedia.org
      user-agent:
      - python-httpx/0.25.0
    method: POST
    uri: https://meta.wikimedia.org/w/rest.php/oauth2/access_token
  response:
    content: '{"token_type":"Bearer","expires_in":14400,"access_token":"[ACCESS_TOKEN...sqfLY]","refresh_token":"[REFRESH_TOKEN...8f34f]"}'
    headers:
      accept-ranges:
      - bytes
      access-control-allow-origin:
      - '*'
      age:
      - '0'
      cache-control:
      - private, max-age=0, s-maxage=0
      content-type:
      - application/json; charset=UTF-8
      date:
      - Mon, 06 Nov 2023 15:59:45 GMT
      nel:
      - '{ "report_to": "wm_nel", "max_age": 604800, "failure_fraction": 0.05, "success_fraction":
        0.0}'
      pragma:
      - no-cache
      report-to:
      - '{ "group": "wm_nel", "max_age": 604800, "endpoints": [{ "url": "https://intake-logging.wikimedia.org/v1/events?stream=w3c.reportingapi.network_error&schema_uri=/w3c/reportingapi/network_error/1.0.0"
        }] }'
      server:
      - mw2435.codfw.wmnet
      server-timing:
      - cache;desc="pass", host;desc="cp3066"
      set-cookie:
      - cpPosIndex=1%401699286385%231b5e5eb9377d3c687f9858a14d1dcc33; expires=Mon,
        06-Nov-2023 15:59:55 GMT; Max-Age=10; path=/; secure; HttpOnly
      - UseDC=master; expires=Mon, 06-Nov-2023 15:59:55 GMT; Max-Age=10; path=/; secure;
        HttpOnly
      - WMF-Last-Access=06-Nov-2023;Path=/;HttpOnly;secure;Expires=Fri, 08 Dec 2023
        12:00:00 GMT
      - GeoIP=GB:ENG:Southwark:51.50:-0.09:v4; Path=/; secure; Domain=.wikimedia.org
      - NetworkProbeLimit=0.001;Path=/;Secure;Max-Age=3600
      strict-transport-security:
      - max-age=106384710; includeSubDomains; preload
      transfer-encoding:
      - chunked
      vary:
      - Origin, Accept-Encoding
      x-cache:
      - cp3066 pass, cp3066 pass
      x-cache-status:
      - pass
      x-client-ip:
      - 81.131.37.170
      x-content-type-options:
      - nosniff
    http_version: HTTP/1.1
    status_code: 200
- request:
    body: ''
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      cookie:
      - GeoIP=GB:ENG:Southwark:51.50:-0.09:v4
      host:
      - commons.wikimedia.org
      user-agent:
      - Flickypedia/dev (https://commons.wikimedia.org/wiki/Commons:Flickypedia; hello@flickr.org)
    method: GET
    uri: https://commons.wikimedia.org/w/api.php?action=query&meta=userinfo&format=json
  response:
    content: '{"batchcomplete":"","query":{"userinfo":{"id":829939,"name":"Alexwlchan"}}}'
    headers:
      accept-ranges:
      - bytes
      age:
      - '2'
      cache-control:
      - private, must-revalidate, max-age=0
      content-disposition:
      - inline; filename=api-result.json
      content-length:
      - '75'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 06 Nov 2023 15:59:45 GMT
      nel:
      - '{ "report_to": "wm_nel", "max_age": 604800, "failure_fraction": 0.05, "success_fraction":
        0.0}'
      report-to:
      - '{ "group": "wm_nel", "max_age": 604800, "endpoints": [{ "url": "https://intake-logging.wikimedia.org/v1/events?stream=w3c.reportingapi.network_error&schema_uri=/w3c/reportingapi/network_error/1.0.0"
        }] }'
      server:
      - mw1421.eqiad.wmnet
      server-timing:
      - cache;desc="pass", host;desc="cp3066"
      set-cookie:
      - WMF-Last-Access=06-Nov-2023;Path=/;HttpOnly;secure;Expires=Fri, 08 Dec 2023
        12:00:00 GMT
      - NetworkProbeLimit=0.001;Path=/;Secure;Max-Age=3600
      strict-transport-security:
      - max-age=106384710; includeSubDomains; preload
      vary:
      - Accept-Encoding
      x-cache:
      - cp3066 pass, cp3066 pass
      x-cache-status:
      - pass
      x-client-ip:
      - 81.131.37.170
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    http_version: HTTP/1.1
    status_code: 200
- request:
    body: grant_type=refresh_token&refresh_token=[REFRESH_TOKEN...8f34f]
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '965'
      content-type:
      - application/x-www-form-urlencoded;charset=UTF-8
      host:
      - meta.wikimedia.org
      user-agent:
      - python-httpx/0.25.0
    method: POST
    uri: https://meta.wikimedia.org/w/rest.php/oauth2/access_token
  response:
    content: '{"token_type":"Bearer","expires_in":14400,"access_token":"[ACCESS_TOKEN...XnIac]","refresh_token":"[REFRESH_TOKEN...e14a5]"}'
    headers:
      accept-ranges:
      - bytes
      access-control-allow-origin:
      - '*'
      age:
      - '0'
      cache-control:
      - private, max-age=0, s-maxage=0
      content-type:
      - application/json; charset=UTF-8
      date:
      - Mon, 06 Nov 2023 15:59:46 GMT
      nel:
      - '{ "report_to": "wm_nel", "max_age": 604800, "failure_fraction": 0.05, "success_fraction":
        0.0}'
      pragma:
      - no-cache
      report-to:
      - '{ "group": "wm_nel", "max_age": 604800, "endpoints": [{ "url": "https://intake-logging.wikimedia.org/v1/events?stream=w3c.reportingapi.network_error&schema_uri=/w3c/reportingapi/network_error/1.0.0"
        }] }'
      server:
      - mw2350.codfw.wmnet
      server-timing:
      - cache;desc="pass", host;desc="cp3066"
      set-cookie:
      - cpPosIndex=2%401699286386%231b5e5eb9377d3c687f9858a14d1dcc33; expires=Mon,
        06-Nov-2023 15:59:56 GMT; Max-Age=10; path=/; secure; HttpOnly
      - UseDC=master; expires=Mon, 06-Nov-2023 15:59:56 GMT; Max-Age=10; path=/; secure;
        HttpOnly
      - WMF-Last-Access=06-Nov-2023;Path=/;HttpOnly;secure;Expires=Fri, 08 Dec 2023
        12:00:00 GMT
      - GeoIP=GB:ENG:Southwark:51.50:-0.09:v4; Path=/; secure; Domain=.wikimedia.org
      - NetworkProbeLimit=0.001;Path=/;Secure;Max-Age=3600
      strict-transport-security:
      - max-age=106384710; includeSubDomains; preload
      transfer-encoding:
      - chunked
      vary:
      - Origin, Accept-Encoding
      x-cache:
      - cp3066 pass, cp3066 pass
      x-cache-status:
      - pass
      x-client-ip:
      - 81.131.37.170
      x-content-type-options:
      - nosniff
    http_version: HTTP/1.1
    status_code: 200
- request:
    body: ''
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      cookie:
      - GeoIP=GB:ENG:Southwark:51.50:-0.09:v4
      host:
      - commons.wikimedia.org
      user-agent:
      - Flickypedia/dev (https://commons.wikimedia.org/wiki/Commons:Flickypedia; hello@flickr.org)
    method: GET
    uri: https://commons.wikimedia.org/w/api.php?action=query&meta=userinfo&format=json
  response:
    content: '{"batchcomplete":"","query":{"userinfo":{"id":829939,"name":"Alexwlchan"}}}'
    headers:
      accept-ranges:
      - bytes
      age:
      - '2'
      cache-control:
      - private, must-revalidate, max-age=0
      content-disposition:
      - inline; filename=api-result.json
      content-length:
      - '75'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 06 Nov 2023 15:59:46 GMT
      nel:
      - '{ "report_to": "wm_nel", "max_age": 604800, "failure_fraction": 0.05, "success_fraction":
        0.0}'
      report-to:
      - '{ "group": "wm_nel", "max_age": 604800, "endpoints": [{ "url": "https://intake-logging.wikimedia.org/v1/events?stream=w3c.reportingapi.network_error&schema_uri=/w3c/reportingapi/network_error/1.0.0"
        }] }'
      server:
      - mw1450.eqiad.wmnet
      server-timing:
      - cache;desc="pass", host;desc="cp3066"
      set-cookie:
      - WMF-Last-Access=06-Nov-2023;Path=/;HttpOnly;secure;Expires=Fri, 08 Dec 2023
        12:00:00 GMT
      - NetworkProbeLimit=0.001;Path=/;Secure;Max-Age=3600
      strict-transport-security:
      - max-age=106384710; includeSubDomains; preload
      vary:
      - Accept-Encoding
      x-cache:
      - cp3066 pass, cp3066 pass
      x-cache-status:
      - pass
      x-client-ip:
      - 81.131.37.170
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    http_version: HTTP/1.1
    status_code: 200
version: 1
